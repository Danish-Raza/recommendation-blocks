var blockData = {
  "Other Role-Playing Games": [
    {
      "discount": "",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "handle": "my-time-at-portia-xb1",
      "clip":"assets/sample2.webm",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/My_Time_at_Portia_Xb1_Cov.jpg?v=1592981794",
      "price": "$5.00",
      "product_id": 4545-91,
      "short_text":"lorem ipsum",
      "long_text":"Shoot enemies and gather amazing loot to upgrade and customize your character as you see fit.",
      "title": "My Time at Portia"
    },
    {
      "discount": "",
      "handle": "ni-no-kuni-2-digital-princes-edition-win",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "clip":"assets/sample.mp4",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Ni_no_Kuni_II_win_prince_cov.png?v=1592984299",
      "product_id": 289742,
      "price": "$10.00",
      "title": "Ni no Kuni II: Revenant Kingdom - Digital Prince's Edition"
    },
    {
      "discount": "",
      "handle": "atelier-lulua-the-scion-of-arland-digital-deluxe-edition-win",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Atelier_Lulua_The_Scion_of_Arland_ps4_win_ns_deluxe_cov_601d6f28-39b5-4f7d-8738-c085b3560765.jpg?v=1592984407",
      "product_id": 681153,
      "price": "$15.00",
      "clip":"assets/sample2.webm",
      "title": "Atelier Lulua: The Scion of Arland - Digital Deluxe Edition"
    },
    {
      "discount": "",
      "handle": "bless-online-win",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/BLESS_ONLINE_win_cov.jpg?v=1592984940",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "price": "$5.00",
       "clip":"assets/sample3.webm",
      "product_id": 200504,
      "title": "BLESS ONLINE"
    },
    {
      "discount": "",
      "handle": "atelier-lulua-the-scion-of-arland-digital-deluxe-edition-win",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Atelier_Lulua_The_Scion_of_Arland_ps4_win_ns_deluxe_cov_601d6f28-39b5-4f7d-8738-c085b3560765.jpg?v=1592984407",
      "price": "$20.00",
      "product_id": 681155,
      "clip":"assets/sample2.webm",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "Atelier Lulua: The Scion of Arland - Digital Deluxe Edition"
    },
    {
      "discount": "",
      "handle": "bless-online-win",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/BLESS_ONLINE_win_cov.jpg?v=1592984940",
      "price": "$5.00",
      "product_id": 200506,
      "clip":"assets/sample.mp4",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "BLESS ONLINE"
    }
  ],
  "Other users like you also bought": [
    {
      "discount": "",
      "handle": "agents-of-mayhem-xb1",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/game_cover_688d87af2ef876214d649b588469b7af.jpg?v=1592985340",
      "price": "$5.00",
      "product_id": "VGSXB11397",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "short_text":"lorem ipsum",
      "long_text":"Shoot enemies and gather amazing loot to upgrade and customize your character as you see fit.",
      "title": "Agents of Mayhem"
    },
    {
      "discount": "",
      "handle": "days-gone-digital-deluxe-edition-ps4",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Days-Gone-Digital-Deluxe-Edition-ps4cvr.jpg?v=1592981531",
      "price": "",
      "product_id": "VGSPS4318",
      "short_text":"lorem ipsum",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "long_text":"Shoot enemies and gather amazing loot to upgrade and customize your character as you see fit.",
      "title": "Days Gone: Digital Deluxe Edition"
    },
    {
      "discount": "10%",
      "handle": "ace-combat-7-ps4",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Ace_Combat_7_PS4_Cov.png?v=1592981616",
      "price": "$10.00",
      "product_id": "VGSPS4-69",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "Ace Combat 7: Skies Unknown"
    },
    {
      "discount": "5%",
      "handle": "days-gone-collectors-edition-ps4",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Days_Gone_CE_PS4_Cov.jpg?v=1592981533",
      "price": "$5.00",
      "product_id": "VGSPS4-3.210",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "Days Gone: Collector’s Edition"
    },
    {
      "discount": "",
      "handle": "agents-of-mayhem-xb1",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/game_cover_688d87af2ef876214d649b588469b7af.jpg?v=1592985340",
      "price": "$5.00",
      "product_id": "VGSXB1-13911",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "Agents of Mayhem"
    },
    {
      "discount": "",
      "handle": "days-gone-digital-deluxe-edition-ps4",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Days-Gone-Digital-Deluxe-Edition-ps4cvr.jpg?v=1592981531",
      "price": "",
      "product_id": "VGSPS4-3.112",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "Days Gone: Digital Deluxe Edition"
    },
    {
      "discount": "10%",
      "handle": "ace-combat-7-ps4",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Ace_Combat_7_PS4_Cov.png?v=1592981616",
      "price": "$10.00",
      "product_id": "VGSPS4-613",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "Ace Combat 7: Skies Unknown"
    },
    {
      "discount": "5%",
      "handle": "days-gone-collectors-edition-ps4",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Days_Gone_CE_PS4_Cov.jpg?v=1592981533",
      "price": "$5.00",
      "product_id": "VGSPS4-3.214",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "Days Gone: Collector’s Edition"
    },
    {
      "discount": "",
      "handle": "agents-of-mayhem-xb1",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/game_cover_688d87af2ef876214d649b588469b7af.jpg?v=1592985340",
      "price": "$5.00",
      "product_id": "VGSXB1-13915",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "Agents of Mayhem"
    },
    {
      "discount": "",
      "handle": "days-gone-digital-deluxe-edition-ps4",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Days-Gone-Digital-Deluxe-Edition-ps4cvr.jpg?v=1592981531",
      "price": "",
      "product_id": "VGSPS4-3.116",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "Days Gone: Digital Deluxe Edition"
    },
    {
      "discount": "10%",
      "handle": "ace-combat-7-ps4",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Ace_Combat_7_PS4_Cov.png?v=1592981616",
      "price": "$10.00",
      "product_id": "VGSPS4-617",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "Ace Combat 7: Skies Unknown"
    },
    {
      "discount": "5%",
      "handle": "days-gone-collectors-edition-ps4",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Days_Gone_CE_PS4_Cov.jpg?v=1592981533",
      "price": "$5.00",
      "product_id": "VGSPS4-3.218",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "title": "Days Gone: Collector’s Edition"
    }
  ],
  "Other Role-Playing Game": [
    {
      "discount": "",
      "on_sale":true,
      "handle": "my-time-at-portia-xb1",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/My_Time_at_Portia_Xb1_Cov.jpg?v=1592981794",
      "screenshots": [
        "https://s3.amazonaws.com/gameopedia_covers/screenshots/1431578/10e8527c24f965e91eb1047fec51dabd_full480.jpg",
        "https://s3.amazonaws.com/gameopedia_covers/screenshots/1431577/43cc974f010cdbbcd83f3af0d4ba164a_full480.jpg",
        "https://s3.amazonaws.com/gameopedia_covers/screenshots/2225637/6ef02f613623b7800da742ce520224ad_full480.jpg",
        "https://s3.amazonaws.com/gameopedia_covers/screenshots/1431580/5742bbae7a1807aa2937436f35a0dc0c_full480.jpg"
      ],
      "price": "$5.00",
      "product_id": 45459-19,
      "short_text":"lorem ipsum",
      "clip":"assets/sample2.webm",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "long_text":"Shoot enemies and gather amazing loot to upgrade and customize your character as you see fit.",
      "title": "My Time at Portia"
    },
    {
      "discount": "",
      "handle": "ni-no-kuni-2-digital-princes-edition-win",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Ni_no_Kuni_II_win_prince_cov.png?v=1592984299",
      "screenshots": [
        "https://s3.amazonaws.com/gameopedia_covers/screenshots/1431578/10e8527c24f965e91eb1047fec51dabd_full480.jpg",
        "https://s3.amazonaws.com/gameopedia_covers/screenshots/1431577/43cc974f010cdbbcd83f3af0d4ba164a_full480.jpg",
        "https://s3.amazonaws.com/gameopedia_covers/screenshots/2225637/6ef02f613623b7800da742ce520224ad_full480.jpg",
        "https://s3.amazonaws.com/gameopedia_covers/screenshots/1431580/5742bbae7a1807aa2937436f35a0dc0c_full480.jpg"
      ],
      "price": "$10.00",
      "product_id": 28974-20,
      "short_text":"lorem ipsum",
      "clip":"assets/sample.mp4",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "long_text":"Shoot enemies and gather amazing loot to upgrade and customize your character as you see fit.",
      "title": "Ni no Kuni II: Revenant Kingdom - Digital Prince's Edition"
    }
  ],
  "Frequently bought together": [
    {
      "discount": "",
      "handle": "my-time-at-portia-xb1",
      "clip":"assets/sample2.webm",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/My_Time_at_Portia_Xb1_Cov.jpg?v=1592981794",
      "price": "$5.00",
      "product_id": 4545913399,
      "short_text":"lorem ipsum",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "long_text":"Shoot enemies and gather amazing loot to upgrade and customize your character as you see fit.",
      "title": "My Time at Portia"
    },
    {
      "discount": "5%",
      "handle": "days-gone-collectors-edition-ps4",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/Days_Gone_CE_PS4_Cov.jpg?v=1592981533",
      "price": "$5.00",
      "product_id": "VGSPS-99435210",
      "short_text":"lorem ipsum",
      "clip":"assets/sample3.webm",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "long_text":"Shoot enemies and gather amazing loot to upgrade and customize your character as you see fit.",
      "title": "Days Gone: Collector’s Edition"
    },
    {
      "discount": "",
      "handle": "bless-online-win",
      "img_src": "https://cdn.shopify.com/s/files/1/0280/6457/9655/products/BLESS_ONLINE_win_cov.jpg?v=1592984940",
      "price": "$5.00",
      "product_id": 200500904,
      "clip":"assets/sample2.webm",
      "product_page":"https://www.amazon.in/b?ie=UTF8&node=21345254031",
      "long_text":"Shoot enemies and gather amazing loot to upgrade and customize your character as you see fit.",
      "title": "BLESS ONLINE"
    },
  ]
}
const cardConfig = {
  "template-1": {
    container: { background:"white", titleAlignment: "left", titleColor: "black", titleSize: 14 },
    card:{ height: 140, width: 266, margin: 15, extraWidth: 100, background: "white"}
  },
  "template-2": {
    container: { background:"white", titleAlignment: "left", titleColor: "black", titleSize: 14 },
    card:{ height: 140, width: 120, margin: 15, extraWidth: 220}
  },
  "template-3": {
    container: { background:"white", titleAlignment: "left", titleColor: "black", titleSize: 14 },
    card:{ height: 358, width: 536, margin: 15, extraWidth: 100}
  },
  "template-4": {
    container: { background:"white", titleAlignment: "left", titleColor: "black", titleSize: 14 },
    card:{ height: 140, width: 266, margin: 15, extraWidth: 100, background: "white"}
  },
}

const scrollHandler = (containerIndex,order,paginationIndex) => {
  let rcBlock = document.querySelector(`[data-container-index="${containerIndex}"]`);
  let availableWidht = window.screen.availWidth;
  let paginationBlock = document.querySelector(`#pagination-block${containerIndex}`);
  let itagRight = document.querySelectorAll(".content-box")[containerIndex-1].querySelector(".fa-chevron-right");
  let itagleft = document.querySelectorAll(".content-box")[containerIndex-1].querySelector(".fa-chevron-left");
  let bulletIndex =  Math.ceil(rcBlock.scrollLeft/availableWidht);
  if(order=="right") {
    rcBlock.scrollLeft -= availableWidht;
  } else if(order=="left") {
    rcBlock.scrollLeft += availableWidht;
  } else if (order == "move" && paginationBlock.querySelector("i.active")) {
    paginationBlock.querySelector("i.active").classList.remove("active");
    paginationBlock.querySelectorAll("i")[bulletIndex].classList.add("active");
  } else if(order=="click") {
    rcBlock.scrollLeft = availableWidht*paginationIndex;
  }
  if(paginationBlock.childElementCount == bulletIndex+1) {
    itagRight.style.color="grey";
    itagleft.style.color="black";
  } else if(rcBlock.scrollLeft == 0) {
    itagleft.style.color="grey";
    itagRight.style.color="black";
  } else {
    itagRight.style.color="black";
    itagleft.style.color="black";
  }
}

const paginationHandler = () => {
  let availableWidht = window.screen.availWidth;
  document.querySelectorAll(".content-box").forEach((block,index) => {
    let template = block.getAttribute("data-template");
    let noOfCards = block.getAttribute("data-no-of-cards");
    let requiredWidth = (cardConfig[template].card.width * noOfCards) + cardConfig[template].card.extraWidth;
    let noOfSildes = Math.ceil((requiredWidth/availableWidht));
    let bullet = "";
    let itagRight =  block.querySelector(".fa-chevron-right");
    let itagleft = block.querySelector(".fa-chevron-left");
    if(noOfSildes > 1) {
      for(let i=0 ; i < noOfSildes; i++) {
        bullet = bullet + `<i class="fa fa-circle ${i==0?"active":""}" aria-hidden="true" onclick="scrollHandler(${index+1},'click',${i})"></i>`
      }
    }
    itagleft.style.color="grey";
    if(noOfSildes == 1) {
      itagRight.style.display="none";
      itagleft.style.display="none";
    }
    document.getElementById(`pagination-block${index+1}`).innerHTML = bullet;
  });
}

const addToCartHandler = (productId, containerIndex, order) => {
  let rcBlock = document.querySelector(`[data-container-index="${containerIndex}"]`);
  let selectedProduct = "";
  if(order=="single") {
    selectedProduct = productId;
  } else if(order=="multi") {
    selectedProduct = [];
    rcBlock.querySelectorAll("input:checked").forEach(element => {
      selectedProduct.push(element.value)
    });
  }
}

window.onload = () => {
  var gameopediaRecommendationBlock = document.getElementById("gameopedia-recommendation-block");
  var index = 0;
  const params = new URLSearchParams(window.location.search);
  let page = params.get("page");
  let api_key = "123abc567zx";
  const templateMapping = {
    "Other Role-Playing Games": "template-1",
    "Other users like you also bought": "template-2",
    "Other Role-Playing Game": "template-3",
    "Frequently bought together": "template-4"
  }
  for (var recBlock in blockData) {
    index++;
    let template = templateMapping[recBlock] ? templateMapping[recBlock] : "template-1";
    let noOfCards = blockData[recBlock].length;
    let block = getRcBlocks(blockData[recBlock], index, recBlock, template, noOfCards);
    gameopediaRecommendationBlock.innerHTML += block;
  }
  paginationHandler()
  // fetch('https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits')
  // .then(response => response.json())
  // .then(data => {
  //   for (var recBlock in blockData) {
  //     index++;
  //     let template = templateMapping[recBlock] ? templateMapping[recBlock] : "template-1";
  //     let noOfCards = blockData[recBlock].length;
  //     let block = getRcBlocks(blockData[recBlock], index, recBlock, template, noOfCards);
  //     gameopediaRecommendationBlock.innerHTML += block;
  //   }
  //   paginationHandler()
  // }).catch( err => err)
}

window.onresize = paginationHandler;

const playVideo = (video,template,card,cardIndex) => {
  let parentElement = card.parentNode; 
  if(template == "template-1") {
    if(video.paused == false) {
      video.style.transform = "scale(1.2)";
      video.style["-webkit-transform"] = "scale(1.2)";
      video.style["--ms-transform"] = "scale(1.2)";
    }
    video.style.width = `${cardConfig[template].card.width}px`;
    parentElement.querySelector(".card-footer").style.left = `${cardConfig[template].card.width-81}px`;
  } else if(template == "template-4" && cardIndex!=0) {
    if(video.paused == false) {
      video.style.transform = "scale(1.2)";
      video.style["-webkit-transform"] = "scale(1.2)";
      video.style["--ms-transform"] = "scale(1.2)";
    }
    video.style.width = `${cardConfig[template].card.width}px`;
    parentElement.querySelector(".card-footer").style.left = `${cardConfig[template].card.width-65}px`;
  } else if(template == "template-3") {
    if(video.paused == false) {
      video.style.transform = "scale(1.2)";
      video.style["-webkit-transform"] = "scale(1.2)";
      video.style["--ms-transform"] = "scale(1.2)";
    }
  }
  if(video.readyState == 4 && template=="template-4" && cardIndex!=0) {
    video.play();
  } else if(video.readyState == 4 && template!="template-4") {
    video.play();
  }
}

const pauseVideo = (video,template,card,cardIndex) => {
  if(template=="template-1") {
    video.load()
    video.style.width = `${(cardConfig[template].card.width/2)-10}px`;
    video.style.transform = "scale(1.0)";
    video.style["-webkit-transform"] = "scale(1.0)"; 
    video.style["--ms-transform"] = "scale(1.0)";
    card.querySelector(".card-footer").style.left=`${(cardConfig[template].card.width/2)-10}px`;
  } else if(template == "template-4" && cardIndex != 0) {
    video.load()
    video.style.width = `${(cardConfig[template].card.width/2)-10}px`;
    video.style.transform = "scale(1.0)";
    video.style["-webkit-transform"] = "scale(1.0)"; 
    video.style["--ms-transform"] = "scale(1.0)";
    card.querySelector(".card-footer").style.left=`${(cardConfig[template].card.width/2)+4}px`;
  } else if(template == "template-3" && video.pause) {
    video.pause();
  }
}

const screenShotsHandler = (selectedUrl, videoElement, order, element) => {
  if(order=="image") {
    videoElement.poster = selectedUrl;
    videoElement.load();
    videoElement.src="";
    videoElement.style.transform = "scale(1.0)";
    videoElement.style["-webkit-transform"] = "scale(1.0)"; 
    videoElement.style["--ms-transform"] = "scale(1.0)";
  } else if(order=="video") {
    videoElement.src = selectedUrl; 
    videoElement.style.transform = "scale(1.2)";
    videoElement.style["-webkit-transform"] = "scale(1.2)";
    videoElement.style["--ms-transform"] = "scale(1.2)";
    videoElement.play();
  }
}

const screenShotsScrollHandler = (element,order) => {
  let screenshots = element.querySelector(".screenshots");
  let scrollLeft = screenshots.scrollLeft;
  let itagRight = element.querySelector(".right-arrow");
  let itagleft = element.querySelector(".left-arrow");
  if(order == "right") {
    screenshots.scrollLeft+= 83;
  } else if(order == "left") {
    screenshots.scrollLeft-= 83;
  } else if(order == "move") {
    if(scrollLeft == 0) {
      itagleft.style.color = "grey";
      itagRight.style.color = "white";
    } else {
      itagleft.style.color = "white";
      itagRight.style.color = "grey";
    }

  }
}

const getRcBlocks = (recData, index, recBlock, template, noOfCards) => {
  let cards = ""
  if(template == "template-1") {
    recData.forEach((record,cardIndex) => {
      cards+= `<div class="card" style="min-width:${cardConfig[template].card.width}px;max-width:${cardConfig[template].card.width}px;height:${cardConfig[template].card.height}px;background:${cardConfig[template].card.background}" onmouseleave="pauseVideo(bgvidContainer${index}Card${cardIndex},'${template}',this)">
      <div class="card-body"> 
        <video poster="${record.img_src}" src="${record.clip}" id="bgvidContainer${index}Card${cardIndex}", playsinline muted loop  onmouseover="playVideo(bgvidContainer${index}Card${cardIndex},'${template}',this)"></video> 
        <div class="card-footer" style="left:${(cardConfig[template].card.width/2)-7}px">
          ${record.price ? `<div class="price">${record.price}</div>`: ""}
          <i class="fa fa-shopping-cart" aria-hidden="true" onclick="addToCartHandler('${record.product_id}',${cardIndex},'single')"></i>
        </div> 
      </div>
      <div class="card-header">
      <a class="title" href="${record.product_page}" target=_blank>${record.title ? record.title : ""}</a>
        <div class="short-text">${record.short_text ? record.short_text : ""}</div>
        <div class="long-text">${record.long_text ? record.long_text : ""}</div>
      </div>
    </div>`
    });
  } else if(template == "template-2") {
    recData.forEach((record, cardIndex) => {
      cards += `<div class="card-wrapper">
      <div class="card-body" style="height:${cardConfig[template].card.height}px;align-item:center">
        <div class="card-footer">
          <div class="long-text" style="color:white;text-align:center;padding:5px">${record.long_text ? record.long_text : ""}</div>
          <div style="display:flex;justify-content: center;width:${cardConfig[template].card.width}px">
          <div class="price" style="color:#F8E71C">${record.price ? record.price :""}</div>
          <i class="fa fa-shopping-cart" aria-hidden="true"  onclick="addToCartHandler('${record.product_id}',${cardIndex},'single')"></i>
          </div>cardIndex
        </div>
      </div>
      <div class="card">
        <div class="box-art" style="background-image: url(${record.img_src});min-width:${cardConfig[template].card.width}px;max-width:${cardConfig[template].card.width}px;height:${cardConfig[template].card.height}px"></div>
      </div>
      <a class="title" href="${record.product_page}" target=_blank>${record.title ? record.title : ""}</a>
      <div class="short-text">${record.short_text ? record.short_text : ""}</div>
      </div>`
    });
  } else if(template == "template-3") {
    recData.forEach((record, cardIndex) => {
      let screenshots = `<div class="box-art" style="background-image: linear-gradient(to bottom, rgba(245, 246, 252, 0.52), rgb(143, 139, 136)), url(${record.img_src});color:white;display:flex;justify-content:center;align-item:center;cursor:pointer" onclick="screenShotsHandler('${record.clip}',bgvidContainer${index}Card${cardIndex},'video',this)"><i class="fa fa-play"></i></div>`;
      if(record.screenshots) {
        record.screenshots.forEach(element => {
          screenshots+= `<div class="box-art" style="background-image: url(${element});" onclick="screenShotsHandler('${element}',bgvidContainer${index}Card${cardIndex},'image',this)"></div>`
        }); 
      } else {
        screenshots=""
      }
      cards += `<div class="card-wrapper" onmouseover="playVideo(bgvidContainer${index}Card${cardIndex},'${template}',this)" onmouseleave="pauseVideo(bgvidContainer${index}Card${cardIndex},'${template}'),this" >
      <canvas class="canvas"></canvas>
      <div class="card-body">
        <div class="card-header">
          <div class="box-art" style="background-image: url(${record.img_src});"></div>
          <a class="title" href="${record.product_page}" target=_blank>${record.title ? record.title : ""}</a>
          <div class="short-text">${record.short_text ? record.short_text : ""}</div>
          <div class="long-text">${record.long_text ? record.long_text : ""}</div>
        </div>
        <div class="card-footer" style="width:${cardConfig[template].card.width-60}px">
          <div class="add-to-cart"><i class="fa fa-shopping-cart" aria-hidden="true" style="margin-right:5px;font-size:17px"  onclick="addToCartHandler('${record.product_id}',${cardIndex},'single')"></i></div> 
          ${record.price ? `<div class="right-section">${record.on_sale ?"<div class='on-sale'>ON SALE</div>" : ""}<div class="price">${record.price}</div></div>`: ""}
          ${screenshots != "" ? `<div class="screenshots-wrapper" id="screenShotsContainer${index}Card${cardIndex}">
          <span class="left-arrow" onclick="screenShotsScrollHandler(screenShotsContainer${index}Card${cardIndex},'left')">&#10148;</span>          
          <div class="screenshots" onscroll="screenShotsScrollHandler(screenShotsContainer${index}Card${cardIndex},'move')">
            ${screenshots}
          </div>
          <span class="right-arrow" onclick="screenShotsScrollHandler(screenShotsContainer${index}Card${cardIndex},'right')">&#10148;</span>          
          </div> `: ""}
        </div>
      </div>
      <div class="card" style="min-width:${cardConfig[template].card.width}px;max-width:${cardConfig[template].card.width}px;height:${cardConfig[template].card.height}px">
        <video poster="${record.img_src}" src="${record.clip}" id="bgvidContainer${index}Card${cardIndex}" playsinline muted loop style="min-width:${cardConfig[template].card.width}px;max-width:${cardConfig[template].card.width}px;height:${cardConfig[template].card.height}px"></video>
      </div>
      </div>`
    });
  } else if(template == "template-4") {
    recData.forEach((record, cardIndex) => {
    cards+= `<div class="card"  onmouseleave="pauseVideo(bgvidContainer${index}Card${cardIndex},'${template}',this,${cardIndex})" style="min-width:${cardConfig[template].card.width}px;max-width:${cardConfig[template].card.width}px;height:${cardConfig[template].card.height}px;background:${cardConfig[template].card.background}">
      <div class="card-body"> 
        <video poster="${record.img_src}" src="${record.clip}" id="bgvidContainer${index}Card${cardIndex}" playsinline muted loop  onmouseover="playVideo(bgvidContainer${index}Card${cardIndex},'${template}',this,${cardIndex})"></video> 
        <div class="card-footer" style="left:${cardIndex!=0 ? (cardConfig[template].card.width/2)+5 : (cardConfig[template].card.width/2)-7}px">
         ${ cardIndex != 0 ? `<label class="checkbox-label">
              <input type="checkbox" checked value='${record.product_id}'>
              <span class="checkbox-custom rectangular"></span>
          </label>` : ""}
          <div class="price">${record.price ? record.price :""}</div>
        </div>
      </div>
      <div class="card-header">
        <a class="title" href="${record.product_page}" target=_blank>${record.title ? record.title : ""}</a>
        <div class="short-text">${record.short_text ? record.short_text : ""}</div>
        <div class="long-text">${record.long_text ? record.long_text : ""}</div>
      </div>
    </div>
    ${cardIndex == 0 ? '<div style="display:flex;align-items:center;font-weight:bold;font-size:27px">+</div>' : ""}`
    });
    cards+=`<div class="add-to-cart" onclick="addToCartHandler(null,${index},'multi')">ADD TO CART</div>`
  }
  return (
    `<div class="content-box ${template}" data-template="${template}" data-no-of-cards="${noOfCards}" style="background:${cardConfig[template].container.background}">
      <div class="content-title" style="text-align:${cardConfig[template].container.titleAlignment};color:${cardConfig[template].container.titleColor};font-size:${cardConfig[template].container.titleSize}px"> ${recBlock}</div>
      <div class="container-wrapper">
        <i class="fa fa-chevron-left" aria-hidden="true" onclick="scrollHandler(${index},'right')"></i>
        <div class="container" data-container-index="${index}" onscroll="scrollHandler(${index},'move')">
          ${cards}
        </div>
        <i class="fa fa-chevron-right" aria-hidden="true" onclick="scrollHandler(${index},'left')"></i>
      </div>
      <div class="pagination" id="pagination-block${index}"></div>
    </div>`
  )
}